/*! For license information please see index.9e4560f8f1766c8b5f08.cjs.LICENSE.txt */
"use strict";function rgbaToLab(t,a){a=normalize(a||{R:255,G:255,B:255});let e=t=normalize(t);return void 0!==t.A&&(e={R:a.R+(t.R-a.R)*t.A,G:a.G+(t.G-a.G)*t.A,B:a.B+(t.B-a.B)*t.A}),xyzToLab(rgbToXyz(e))}function rgbToXyz(t){let a=t.R/255,e=t.G/255,r=t.B/255;a>.04045?a=Math.pow((a+.055)/1.055,2.4):a/=12.92,e>.04045?e=Math.pow((e+.055)/1.055,2.4):e/=12.92,r>.04045?r=Math.pow((r+.055)/1.055,2.4):r/=12.92,a*=100,e*=100,r*=100;return{X:.4124*a+.3576*e+.1805*r,Y:.2126*a+.7152*e+.0722*r,Z:.0193*a+.1192*e+.9505*r}}function xyzToLab(t){let a=t.Y/100,e=t.Z/108.883,r=t.X/95.047;r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116;return{L:116*a-16,a:500*(r-a),b:200*(a-e)}}function normalize(t){let a,e,r,o;"R"in t?(a=t.R,e=t.G,r=t.B,o=t.A):(a=t.r,e=t.g,r=t.b,o=t.a);const n={R:a,G:e,B:r};return void 0!==o&&(n.A=o),n}function ciede2000(t,a,e){("R"in t||"r"in t)&&(t=rgbaToLab(t,e)),("R"in a||"r"in a)&&(a=rgbaToLab(a,e));const r=t.L,o=t.a,n=t.b,p=a.L,l=a.a,s=a.b,h=Math.sqrt(Math.pow(o,2)+Math.pow(n,2)),b=Math.sqrt(Math.pow(l,2)+Math.pow(s,2)),u=(h+b)/2,c=.5*(1-Math.sqrt(Math.pow(u,7)/(Math.pow(u,7)+Math.pow(25,7)))),i=(1+c)*o,M=(1+c)*l,f=Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),_=Math.sqrt(Math.pow(M,2)+Math.pow(s,2)),m=hpF(n,i),L=hpF(s,M),w=p-r,g=_-f,P=dhpF(h,b,m,L),x=2*Math.sqrt(f*_)*Math.sin(radians(P)/2),y=(r+p)/2,d=(f+_)/2,R=aHpF(h,b,m,L),B=1-.17*Math.cos(radians(R-30))+.24*Math.cos(radians(2*R))+.32*Math.cos(radians(3*R+6))-.2*Math.cos(radians(4*R-63)),G=30*Math.exp(-Math.pow((R-275)/25,2)),K=Math.sqrt(Math.pow(d,7)/(Math.pow(d,7)+Math.pow(25,7))),T=1+.015*Math.pow(y-50,2)/Math.sqrt(20+Math.pow(y-50,2)),$=1+.045*d,q=1+.015*d*B,z=-2*K*Math.sin(radians(2*G));return Math.sqrt(Math.pow(w/(1*T),2)+Math.pow(g/(1*$),2)+Math.pow(x/(1*q),2)+z*(g/(1*$))*(x/(1*q)))}function degrees(t){return t*(180/Math.PI)}function radians(t){return t*(Math.PI/180)}function hpF(t,a){if(0===t&&0===a)return 0;{const e=degrees(Math.atan2(t,a));return e>=0?e:e+360}}function dhpF(t,a,e,r){if(t*a===0)return 0;if(Math.abs(r-e)<=180)return r-e;if(r-e>180)return r-e-360;if(r-e<-180)return r-e+360;throw new Error}function aHpF(t,a,e,r){if(t*a===0)return e+r;if(Math.abs(e-r)<=180)return(e+r)/2;if(Math.abs(e-r)>180&&e+r<360)return(e+r+360)/2;if(Math.abs(e-r)>180&&e+r>=360)return(e+r-360)/2;throw new Error}function paletteMapKey(t){return 1!==(t=normalize(t)).A?`rgba(${t.R}, ${t.G}, ${t.B}, ${t.A})`:`rgb(${t.R}, ${t.G}, ${t.B})`}function labPaletteMapKey(t){return`lab(${t.L}, ${t.a}, ${t.b})`}function mapPalette(t,a,e,r){const o={};r=r||{R:255,G:255,B:255},e=e||"closest";for(let n=0;n<t.length;n+=1){const p=t[n];let l,s;for(let t=0;t<a.length;t+=1){const o=a[t],n=ciede2000(p,o,r);l?(void 0!==s&&"closest"===e&&n<s||void 0!==s&&"furthest"===e&&n>s)&&(l=o,s=n):(l=o,s=n)}l&&(o[paletteMapKey(p)]=l)}return o}function matchPaletteLab(t,a,e){let r,o,n=a[0],p=ciede2000(t,n);for(let l=1,s=a.length;l<s;l+=1)r=a[l],o=ciede2000(t,r),(!e&&o<p||e&&o>p)&&(n=r,p=o);return n}function mapPaletteLab(t,a,e){const r={},o="furthest"===e;for(let n=0;n<t.length;n+=1){const e=t[n];r[labPaletteMapKey(e)]=matchPaletteLab(e,a,o)}return r}function closest(t,a,e){const r=paletteMapKey(t);return mapPalette([t],a,"closest",e=e||{R:255,G:255,B:255})[r]}function closestLab(t,a){return matchPaletteLab(t,a,!1)}function furthest(t,a,e){const r=paletteMapKey(t);return mapPalette([t],a,"furthest",e=e||{R:255,G:255,B:255})[r]}function furthestLab(t,a){return matchPaletteLab(t,a,!0)}function map_palette(t,a,e,r){return mapPalette(t,a,e,r)}function palette_map_key(t){return paletteMapKey(t)}function rgb_to_lab(t){return rgbaToLab(t)}function rgba_to_lab(t){return rgbaToLab(t)}function match_palette_lab(t,a,e){return matchPaletteLab(t,a,e)}function map_palette_lab(t,a,e){return mapPaletteLab(t,a,e)}function lab_palette_map_key(t){return labPaletteMapKey(t)}function closest_lab(t,a){return closestLab(t,a)}function furthest_lab(t,a){return furthestLab(t,a)}exports.closest=closest,exports.closestLab=closestLab,exports.closest_lab=closest_lab,exports.diff=ciede2000,exports.furthest=furthest,exports.furthestLab=furthestLab,exports.furthest_lab=furthest_lab,exports.labPaletteMapKey=labPaletteMapKey,exports.lab_palette_map_key=lab_palette_map_key,exports.mapPalette=mapPalette,exports.mapPaletteLab=mapPaletteLab,exports.map_palette=map_palette,exports.map_palette_lab=map_palette_lab,exports.matchPaletteLab=matchPaletteLab,exports.match_palette_lab=match_palette_lab,exports.paletteMapKey=paletteMapKey,exports.palette_map_key=palette_map_key,exports.rgb_to_lab=rgb_to_lab,exports.rgbaToLab=rgbaToLab,exports.rgba_to_lab=rgba_to_lab;